## 前言

### 文章主题

本文主要讲解数据仓库的一个重要环节：如何设计数据分层！

本文对数据分层的讨论适合下面一些场景:

- 数据建设刚起步，大部分的数据经过粗暴的数据接入后就直接对接业务。
- 数据建设发展到一定阶段，发现数据的使用杂乱无章，各种业务都是从原始数据直接计算而得。
- 各种重复计算，严重浪费了计算资源，需要优化性能。

## 为什么要分层

我们对数据进行分层的一个主要原因就是希望在管理数据的时候,能够对数据有一个更加清晰的掌控.主要由下面几个原因:

1. 清晰数据结构: 每一个数据分层都有它的作用域,方便在使用表的时候定位和理解;
2. 数据血缘追踪: 最终给业务的是一张能直接使用的业务表, 但是它的来源由很多,如果有一张来源表出问题,希望能快速准确定位到问题,并清楚它的影响范围;
3. 减少重复开发：规范数据分层，开发一些通用的中间层数据，能够减少极大的重复计算;
4. 把复杂问题简单化。讲一个复杂的任务分解成多个步骤来完成，每一层只处理单一的步骤，比较简单和容易理解。而且便于维护数据的准确性，当数据出现问题之后，可以不用修复所有的数据，只需要从有问题的步骤开始修复;
5. 屏蔽原始数据的异常;
6. 屏蔽业务的影响，不必改一次业务就需要重新接入数据;

数据体系中的各个表的依赖就像是电线的流向一样，我们都希望它是规整、流向清晰、便于管理的，如下图：
![image](http://github.com//wayxzz/wayxzz.github.io/raw/master/images/640.webp)
